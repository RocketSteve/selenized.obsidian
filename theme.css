/* Modified Obsidian Theme */

.theme-dark,
.theme-light {
  /* Common colors for both themes */
  --color-red: rgb(210, 33, 45);
  --color-red-rgb: 210, 33, 45;
  --color-green: rgb(72, 145, 0);
  --color-green-rgb: 72, 145, 0;
  --color-yellow: rgb(173, 137, 0);
  --color-yellow-rgb: 173, 137, 0;
  --color-blue: rgb(0, 114, 212);
  --color-blue-rgb: 0, 114, 212;
  --color-magenta: rgb(202, 72, 152);
  --color-magenta-rgb: 202, 72, 152;
  --color-cyan: rgb(0, 156, 143);
  --color-cyan-rgb: 0, 156, 143;
  --color-orange: rgb(194, 93, 30);
  --color-orange-rgb: 194, 93, 30;
  --color-violet: rgb(135, 98, 198);
  --color-violet-rgb: 135, 98, 198;
  
  /* Bright variants */
  --color-br-red: rgb(204, 23, 41);
  --color-br-red-rgb: 204, 23, 41;
  --color-br-green: rgb(66, 139, 0);
  --color-br-green-rgb: 66, 139, 0;
  --color-br-yellow: rgb(167, 131, 0);
  --color-br-yellow-rgb: 167, 131, 0;
  --color-br-blue: rgb(0, 109, 206);
  --color-br-blue-rgb: 0, 109, 206;
  --color-br-magenta: rgb(196, 67, 146);
  --color-br-magenta-rgb: 196, 67, 146;
  --color-br-cyan: rgb(0, 151, 138);
  --color-br-cyan-rgb: 0, 151, 138;
  --color-br-orange: rgb(188, 88, 25);
  --color-br-orange-rgb: 188, 88, 25;
  --color-br-violet: rgb(130, 93, 192);
  --color-br-violet-rgb: 130, 93, 192;
  
  /* Accent color */
  --accent-h: 23deg;
  --accent-s: 87%;
  --accent-l: 74%;
}

/* Light theme */
.theme-light {
  /* Base background and foreground colors */
  --bg-0: rgb(251, 243, 219);
  --bg-1: rgb(236, 227, 204);
  --bg-2: rgb(213, 205, 182);
  --dim-0: rgb(144, 153, 149);
  --fg-0: rgb(83, 103, 109);
  --fg-1: rgb(58, 77, 83);
  
  /* Overwrite default theme colors */
  --color-base-00: var(--bg-0);
  --color-base-05: var(--bg-0);
  --color-base-10: var(--bg-1);
  --color-base-20: var(--bg-1);
  --color-base-25: var(--bg-2);
  --color-base-30: var(--bg-2);
  --color-base-35: var(--bg-2);
  --color-base-40: var(--dim-0);
  --color-base-50: var(--dim-0);
  --color-base-60: var(--fg-0);
  --color-base-70: var(--fg-0);
  --color-base-100: var(--fg-1);
  
  /* Background */
  --background-primary: var(--bg-0);
  --background-primary-alt: var(--bg-1);
  
  /* Text */
  --text-normal: var(--fg-0);
  --text-muted: var(--fg-0);
  --text-faint: var(--dim-0);
  
  /* File explorer */
  --active-bg: hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.1);
  --nav-item-background-active: var(--active-bg);
  
  /* Hashtags */
  --tag-background: hsla(var(--interactive-accent-hsl), 0.1);
}

/* Dark theme */
.theme-dark {
  /* Base background and foreground colors */
  --bg-0: rgb(16, 60, 72);
  --bg-1: rgb(24, 73, 86);
  --bg-2: rgb(45, 91, 105);
  --dim-0: rgb(114, 137, 143);
  --fg-0: rgb(173, 188, 188);
  --fg-1: rgb(202, 216, 217);
  
  /* Overwrite default theme colors */
  --color-base-00: var(--bg-0);
  --color-base-10: var(--bg-0);
  --color-base-20: var(--bg-1);
  --color-base-25: var(--bg-1);
  --color-base-30: var(--bg-2);
  --color-base-35: var(--bg-2);
  --color-base-40: var(--dim-0);
  --color-base-50: var(--dim-0);
  --color-base-60: var(--fg-0);
  --color-base-70: var(--fg-0);
  --color-base-100: var(--fg-1);
  
  /* Background */
  --background-primary: var(--bg-0);
  --background-primary-alt: var(--bg-1);
  
  /* Text */
  --text-normal: var(--fg-0);
  --text-muted: var(--dim-0);
  --text-faint: var(--dim-0);
  
  /* File explorer */
  --active-bg: var(--bg-2);
  --nav-item-background-active: var(--active-bg);
  
  /* Hashtags */
  --tag-background: hsla(var(--interactive-accent-hsl), 0.2);
  
  /* For dark theme, use bright variants for accents */
  --color-red: rgb(250, 87, 80);
  --color-red-rgb: 250, 87, 80;
  --color-green: rgb(117, 185, 56);
  --color-green-rgb: 117, 185, 56;
  --color-yellow: rgb(219, 179, 45);
  --color-yellow-rgb: 219, 179, 45;
  --color-blue: rgb(70, 149, 247);
  --color-blue-rgb: 70, 149, 247;
  --color-magenta: rgb(242, 117, 190);
  --color-magenta-rgb: 242, 117, 190;
  --color-cyan: rgb(65, 199, 185);
  --color-cyan-rgb: 65, 199, 185;
  --color-orange: rgb(237, 134, 73);
  --color-orange-rgb: 237, 134, 73;
  --color-violet: rgb(175, 136, 235);
  --color-violet-rgb: 175, 136, 235;
}

/* Common settings for both themes */
.theme-dark,
.theme-light {
  /* Use your orange as the accent color */
  --color-accent: var(--color-orange);
  --color-accent-rgb: var(--color-orange-rgb);
  --interactive-accent: var(--color-accent);
  --interactive-accent-rgb: var(--color-accent-rgb);
  --interactive-accent-hover: var(--color-br-orange);
  
  /* Background */
  --background-secondary: var(--background-primary);
  --background-secondary-alt: var(--background-primary-alt);
  
  /* Text */
  --text-on-accent: var(--bg-0);
  
  /* Headings */
  --text-title: var(--color-cyan);
  --heading-formatting: var(--text-title);
  --h1-color: var(--text-title);
  --h2-color: var(--text-title);
  --h3-color: var(--text-title);
  --h4-color: var(--text-title);
  --h5-color: var(--text-title);
  --h6-color: var(--text-title);
  
  /* Links */
  --link-color: var(--color-blue);
  --link-color-hover: var(--link-color);
  --link-decoration: none;
  --link-decoration-hover: underline;
  --link-external-color: var(--color-violet);
  --link-external-color-hover: var(--link-external-color);
  --link-external-decoration: none;
  --link-external-decoration-hover: underline;
  --link-unresolved-color: var(--color-red);
  --link-unresolved-color-hover: var(--link-unresolved-color);
  --link-unresolved-opacity: unset;
  --link-unresolved-decoration-color: var(--link-unresolved-color);
  
  /* Code */
  --code-normal: var(--text-normal);
  --code-comment: var(--color-cyan);
  --code-function: var(--color-blue);
  --code-important: var(--color-orange);
  --code-keyword: var(--color-green);
  --code-operator: var(--code-normal);
  --code-property: var(--code-normal);
  --code-punctuation: var(--code-normal);
  --code-string: var(--color-cyan);
  --code-tag: var(--color-red);
  --code-value: var(--color-magenta);
  
  /* Tables */
  --table-header-size: inherit;
  --table-header-weight: var(--font-bold);
  --table-header-color: inherit;
  
  /* Highlights */
  --text-highlight-bg: var(--color-accent);
  --text-highlight-bg-active: var(--color-accent);
  
  /* Checkboxes in reading view */
  --checkbox-border-color: var(--interactive-accent);
  --checkbox-border-color-hover: var(--interactive-accent-hover);
  
  /* Hashtags */
  --tag-padding-x: var(--tag-padding-y);
  --tag-color: var(--color-accent);
  
  /* Focus border */
  --background-modifier-border-focus: var(--interactive-accent);
}

/* 
 * The following sections are kept from the original CSS file
 * with references to the updated color variables
 */

.cm-s-obsidian {
  /* Checkboxes */
  /* Links */
  /* Tables */
  /* Search results */
  /* Code */
  /* Highlights */
}
.cm-s-obsidian span.cm-formatting-task {
  color: var(--checkbox-color);
}
.cm-s-obsidian span.cm-formatting-link {
  color: var(--link-color);
}
.cm-s-obsidian span.cm-formatting-link.cm-strikethrough {
  text-decoration-line: line-through;
}
.cm-s-obsidian span.cm-link {
  color: var(--link-external-color) !important;
}
.cm-s-obsidian span.cm-url.cm-strikethrough {
  text-decoration-line: line-through;
}
.cm-s-obsidian .HyperMD-table-row-0 {
  font-weight: var(--font-bold);
}
.cm-s-obsidian span.obsidian-search-match-highlight {
  box-shadow: unset;
  mix-blend-mode: unset;
  border-radius: unset;
  background: var(--color-green);
  color: var(--text-on-accent);
  padding: 2px 0;
}
.cm-s-obsidian span.cm-comment {
  color: var(--code-comment);
}
.cm-s-obsidian span.cm-inline-code {
  padding: 2px 0;
}
.cm-s-obsidian span.cm-formatting-highlight,
.cm-s-obsidian span.cm-highlight {
  color: var(--text-on-accent);
  padding: 2px 0;
}

/* More code */
.cm-def {
  color: var(--code-function);
}

.cm-atom {
  color: var(--code-value);
}

.cm-hmd-frontmatter.cm-hmd-frontmatter.cm-atom,
.cm-hmd-frontmatter.cm-hmd-frontmatter.cm-def {
  color: var(--interactive-accent);
}

/* Search results */
.is-flashing {
  border-radius: unset;
  --code-normal: var(--text-highlight-bg);
  --link-color: var(--text-on-accent);
  --link-color-hover: var(--background-primary-alt);
  --link-decoration: underline;
  --link-decoration-hover: none;
  --link-external-color: var(--text-on-accent);
  --link-external-color-hover: var(--background-primary-alt);
  --link-external-decoration: underline;
  --link-external-decoration-hover: none;
}

.search-result-file-matched-text {
  color: var(--text-on-accent);
  padding: 2px 0;
}

.markdown-rendered {
  /* Unresolved links in preview mode */
  /* Highlights in preview mode */
}
.markdown-rendered .internal-link.is-unresolved:hover {
  color: var(--link-unresolved-color-hover);
  text-decoration-color: var(--link-unresolved-color-hover);
}
.markdown-rendered mark {
  color: var(--text-on-accent);
}

/* Highlight current line */
.cm-active {
  background: var(--active-bg);
}
.cm-active.cm-gutterElement {
  color: var(--color-accent);
}

/* Hashtags */
.cm-hashtag.cm-hashtag-begin, .cm-hashtag.cm-hashtag-end {
  border: unset;
  border-radius: unset;
}

/* https://github.com/nothingislost/obsidian-dynamic-highlights */
.cm-current-word,
.cm-matched-word,
.cm-current-string,
.cm-matched-string {
  background: var(--color-yellow);
  color: var(--text-on-accent);
  text-decoration: none;
  padding: 2px 0;
}

/* File explorer */
.is-flashing {
  color: var(--text-on-accent) !important;
}

.workspace-leaf.mod-active .nav-folder.has-focus > .nav-folder-title,
.workspace-leaf.mod-active .nav-file.has-focus > .nav-file-title {
  box-shadow: 0 0 0 2px var(--color-accent);
}

/* Community theme and plugin browsers */
.community-item:hover {
  border-color: var(--color-accent);
}
.community-item .suggestion-highlight {
  color: var(--text-on-accent);
  font-weight: unset;
}

/* Vimrc Support Plugin */
div.status-bar-item.plugin-obsidian-vimrc-support.vimrc-support-vim-mode {
  color: var(--text-on-accent);
}
div.status-bar-item.plugin-obsidian-vimrc-support.vimrc-support-vim-mode[data-vim-mode=normal] {
  background-color: var(--color-blue);
}
div.status-bar-item.plugin-obsidian-vimrc-support.vimrc-support-vim-mode[data-vim-mode=insert] {
  background-color: var(--color-green);
}
div.status-bar-item.plugin-obsidian-vimrc-support.vimrc-support-vim-mode[data-vim-mode=visual] {
  background-color: var(--color-magenta);
}
div.status-bar-item.plugin-obsidian-vimrc-support.vimrc-support-vim-mode[data-vim-mode=replace] {
  background-color: var(--color-red);
}

/* Mermaid */
.mermaid tspan {
  fill: var(--text-on-accent);
}

/* Typography Enhancements */
body {
  --font-text: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  --font-monospace: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
  --font-ui: var(--font-text);
  --font-size-normal: 16px;
  --font-size-code: 14px;
  --line-height-normal: 1.6;
  --line-height-code: 1.4;
}

.theme-light, .theme-dark {
  --font-normal: var(--font-size-normal)/var(--line-height-normal) var(--font-text);
  --font-code: var(--font-size-code)/var(--line-height-code) var(--font-monospace);
}

/* Custom Scrollbars */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background-color: transparent;
}

.theme-light ::-webkit-scrollbar-thumb {
  background-color: var(--dim-0);
  border-radius: 4px;
}

.theme-dark ::-webkit-scrollbar-thumb {
  background-color: var(--dim-0);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background-color: var(--color-accent);
}

/* UI Refinements */
.nav-folder-title, .nav-file-title {
  padding: 4px 6px 4px 16px;
  border-radius: 4px;
  transition: background-color 0.1s ease-in-out;
}

.nav-folder-title:hover, .nav-file-title:hover {
  background-color: var(--active-bg);
}

/* Button Styling */
button {
  border-radius: 4px;
  transition: background-color 0.2s ease;
}

button:hover {
  background-color: var(--active-bg);
}

/* Focus styling */
input:focus, textarea:focus {
  border-color: var(--color-accent) !important;
  box-shadow: 0 0 0 2px rgba(var(--color-accent-rgb), 0.3);
}

/* Modal enhancements */
.modal {
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
}

.modal-close-button {
  color: var(--text-muted);
}

.modal-close-button:hover {
  color: var(--text-normal);
}

/* Note header styling */
.view-header {
  background-color: var(--background-primary);
  border-bottom: 1px solid var(--background-modifier-border);
}

/* Tag styling */
a.tag {
  font-size: 0.9em;
  padding: 2px 6px;
  border-radius: 4px;
  background-color: var(--tag-background);
  transition: background-color 0.2s ease;
}

a.tag:hover {
  background-color: var(--color-accent);
  color: var(--text-on-accent);
}

/* Checkbox styling */
input[type="checkbox"] {
  border-radius: 4px;
  transition: background-color 0.2s ease, border-color 0.2s ease;
}

input[type="checkbox"]:checked {
  background-color: var(--color-accent);
  border-color: var(--color-accent);
}

/*! @settings
name: Custom Theme Settings
id: custom-theme-settings
settings:
  - id: colors
    title: Colors
    type: heading
    level: 2
  - id: light-theme
    title: Light Theme
    type: heading
    level: 3
    collapsed: true
  - id: bg-0-light
    title: Background 0
    type: variable-color
    format: rgb
    default: rgb(251, 243, 219)
  - id: bg-1-light
    title: Background 1
    type: variable-color
    format: rgb
    default: rgb(236, 227, 204)
  - id: bg-2-light 
    title: Background 2
    type: variable-color
    format: rgb
    default: rgb(213, 205, 182)
  - id: dim-0-light
    title: Dim Text
    type: variable-color
    format: rgb
    default: rgb(144, 153, 149)
  - id: fg-0-light
    title: Foreground 0
    type: variable-color
    format: rgb
    default: rgb(83, 103, 109)
  - id: fg-1-light
    title: Foreground 1
    type: variable-color
    format: rgb
    default: rgb(58, 77, 83)
  
  - id: dark-theme
    title: Dark Theme
    type: heading
    level: 3
    collapsed: true
  - id: bg-0-dark
    title: Background 0
    type: variable-color
    format: rgb
    default: rgb(16, 60, 72)
  - id: bg-1-dark
    title: Background 1
    type: variable-color
    format: rgb
    default: rgb(24, 73, 86)
  - id: bg-2-dark
    title: Background 2
    type: variable-color
    format: rgb
    default: rgb(45, 91, 105)
  - id: dim-0-dark
    title: Dim Text
    type: variable-color
    format: rgb
    default: rgb(114, 137, 143)
  - id: fg-0-dark
    title: Foreground 0
    type: variable-color
    format: rgb
    default: rgb(173, 188, 188)
  - id: fg-1-dark
    title: Foreground 1
    type: variable-color
    format: rgb
    default: rgb(202, 216, 217)
  
  - id: accent-colors
    title: Accent Colors
    type: heading
    level: 3
    collapsed: true
  - id: color-red
    title: Red
    type: variable-color
    format: rgb
    default: rgb(210, 33, 45)
    alt-format:
    - id: color-red-rgb
      format: rgb-values
  - id: color-green
    title: Green
    type: variable-color
    format: rgb
    default: rgb(72, 145, 0)
    alt-format:
    - id: color-green-rgb
      format: rgb-values
  - id: color-yellow
    title: Yellow
    type: variable-color
    format: rgb
    default: rgb(173, 137, 0)
    alt-format:
    - id: color-yellow-rgb
      format: rgb-values
  - id: color-blue
    title: Blue
    type: variable-color
    format: rgb
    default: rgb(0, 114, 212)
    alt-format:
    - id: color-blue-rgb
      format: rgb-values
  - id: color-magenta
    title: Magenta
    type: variable-color
    format: rgb
    default: rgb(202, 72, 152)
    alt-format:
    - id: color-magenta-rgb
      format: rgb-values
  - id: color-cyan
    title: Cyan
    type: variable-color
    format: rgb
    default: rgb(0, 156, 143)
    alt-format:
    - id: color-cyan-rgb
      format: rgb-values
  - id: color-orange
    title: Orange
    type: variable-color
    format: rgb
    default: rgb(194, 93, 30)
    alt-format:
    - id: color-orange-rgb
      format: rgb-values
  - id: color-violet
    title: Violet
    type: variable-color
    format: rgb
    default: rgb(135, 98, 198)
    alt-format:
    - id: color-violet-rgb
      format: rgb-values
    
  - id: ui-options
    title: UI Options
    type: heading
    level: 2
  - id: link-underline
    title: Underline links on hover
    description: Toggle whether links should be underlined when hovered
    type: class-toggle
    default: true
